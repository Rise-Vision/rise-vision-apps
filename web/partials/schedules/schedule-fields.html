<stretchy-input ng-model="schedule.name"></stretchy-input>

<div class="form-group mt-5 mb-4">
  <label>Schedule Details</label>
</div>

<div class="form-group">
  <label class="control-label timeline-label" translate>schedules-app.fields.timeline</label>
  <timeline-textbox
  use-localdate = "true"
  time-defined = "schedule.timeDefined"
  start-date = "schedule.startDate"
  end-date = "schedule.endDate"
  start-time = "schedule.startTime"
  end-time = "schedule.endTime"
  recurrence-type = "schedule.recurrenceType"
  recurrence-frequency = "schedule.recurrenceFrequency"
  recurrence-absolute = "schedule.recurrenceAbsolute"
  recurrence-day-of-week = "schedule.recurrenceDayOfWeek"
  recurrence-day-of-month = "schedule.recurrenceDayOfMonth"
  recurrence-week-of-month = "schedule.recurrenceWeekOfMonth"
  recurrence-month-of-year = "schedule.recurrenceMonthOfYear"
  recurrence-days-of-week = "schedule.recurrenceDaysOfWeek"
  ></timeline-textbox>
</div><!--form-group-->

<distribution-selector distribution="schedule.distribution" distribute-to-all="schedule.distributeToAll" hide-cta="true"></distribution-selector>

<div class="schedule-fields-body">
  <div class="playlist-container">
    <div class="py-4 flex-row">
      <label class="mb-0 mr-auto" translate>schedules-app.playlist.title</label>

      <div class="btn-group" dropdown ng-if="schedule.content.length">
        <button id="addPlaylistItemButton" type="button" dropdown-toggle class="dropdown-toggle btn btn-default btn-toolbar">{{'schedules-app.playlist.add-playlist-item' | translate}}</button>
        <div class="dropdown-menu playlist-menu" role="menu">
          <ul>
          <li>
            <a class="u_clickable" id="addPresentationItemButton" ng-click="addPresentationItem()">
              <span translate>schedules-app.playlist.item.presentation</span>
            </a>
          </li>
          <li>
            <a class="u_clickable" id="addUrlItemButton" ng-click="addUrlItem()">
              <span translate>schedules-app.playlist.item.url</span>
            </a>
          </li>
          </ul>
        </div>
      </div>
    </div>

    <playlist playlist-items="schedule.content" ng-show="schedule.content.length"></playlist>
    <div class="border-container text-center" ng-if="!schedule.content.length">
      <div class="panel-body">
        <div class="form-group my-4">
          <label translate>schedules-app.playlist.empty</label>
        </div>
        <div class="btn-group pb-2" dropdown>
          <button id="addPlaylistItemButton" type="button" dropdown-toggle class="dropdown-toggle btn btn-default btn-toolbar">{{'schedules-app.playlist.add-playlist-item' | translate}}</button>
          <div class="dropdown-menu playlist-menu" role="menu">
            <ul>
            <li>
              <a class="u_clickable" id="addPresentationItemButton" ng-click="addPresentationItem()">
                <span translate>schedules-app.playlist.item.presentation</span>
              </a>
            </li>
            <li>
              <a class="u_clickable" id="addUrlItemButton" ng-click="addUrlItem()">
                <span translate>schedules-app.playlist.item.url</span>
              </a>
            </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- presentationIds field is only updated when the Schedule is saved -->
  <div class="preview-container" ng-if="schedule.id && schedule.content.length">
    <div class="text-right border-bottom py-4 mb-4">
      <label class="pull-left mt-3 mb-0">Schedule Preview</label>

      <share-schedule-button schedule="schedule" button-class="btn-default btn-toolbar"></share-schedule-button>
    </div>

    <div class="preview-embed">
      <iframe frameborder="0" ng-src="{{getEmbedUrl()}}">
      </iframe>
    </div>
  </div>
</div>
